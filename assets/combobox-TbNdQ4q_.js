import{r as v,t as Z,o as P,ao as He,a4 as Se,m as ke,T as Ke,u as oe,x as ze,a as qe,G as Ge,c as Xe,Y as ce,y as me,S as k,q as Ye,au as Oe,s as j,av as Ee,as as Je,$ as De,b as _e,d as de,V as ge,K as he,e as Ce,f as Qe,N as Ze,i as fe,p as et,g as tt,l as nt,E as ee,B as ot,C as L,D as st,ak as it,F as lt,aw as at,n as rt,w as ut,a1 as ct,I as dt,P as ht,Q as ye}from"./index-CvCVbuS9.js";import{u as pt}from"./use-by-comparator-Ch7KvTmY.js";import{l as ft,b as mt}from"./use-default-value-Cs7QsSkB.js";import{F as vt,y as gt,R as bt,T as xt,w as Ie,A as St}from"./floating-CjydGm1Z.js";import{a as A,p as Ot,c as re,f as Me,b as Et,g as Ct,u as yt,L as It,S as ae,s as Mt}from"./element-movement-BT6A7GGi.js";import{e as wt}from"./use-resolve-button-type-J0J8N5g4.js";import{F as Tt}from"./use-tree-walker-_f7mgbza.js";import{j as $t}from"./form-fields-DfbHTuSb.js";import{u as we,s as Rt}from"./frozen-ohsQXSW6.js";import{Z as Pt,u as Ft,N as be,V as At}from"./label-CY_Q6YdE.js";function ne(t,i,e){let o=e.initialDeps??[],n,s=!0;function l(){var a,u,r;let d;e.key&&((a=e.debug)!=null&&a.call(e))&&(d=Date.now());const b=t();if(!(b.length!==o.length||b.some((h,m)=>o[m]!==h)))return n;o=b;let p;if(e.key&&((u=e.debug)!=null&&u.call(e))&&(p=Date.now()),n=i(...b),e.key&&((r=e.debug)!=null&&r.call(e))){const h=Math.round((Date.now()-d)*100)/100,m=Math.round((Date.now()-p)*100)/100,x=m/16,w=(T,$)=>{for(T=String(T);T.length<$;)T=" "+T;return T};console.info(`%câ± ${w(m,5)} /${w(h,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*x,120))}deg 100% 31%);`,e?.key)}return e?.onChange&&!(s&&e.skipInitialOnChange)&&e.onChange(n),s=!1,n}return l.updateDeps=a=>{o=a},l}function Te(t,i){if(t===void 0)throw new Error("Unexpected undefined");return t}const kt=(t,i)=>Math.abs(t-i)<1.01,zt=(t,i,e)=>{let o;return function(...n){t.clearTimeout(o),o=t.setTimeout(()=>i.apply(this,n),e)}},$e=t=>{const{offsetWidth:i,offsetHeight:e}=t;return{width:i,height:e}},Dt=t=>t,_t=t=>{const i=Math.max(t.startIndex-t.overscan,0),e=Math.min(t.endIndex+t.overscan,t.count-1),o=[];for(let n=i;n<=e;n++)o.push(n);return o},Vt=(t,i)=>{const e=t.scrollElement;if(!e)return;const o=t.targetWindow;if(!o)return;const n=l=>{const{width:a,height:u}=l;i({width:Math.round(a),height:Math.round(u)})};if(n($e(e)),!o.ResizeObserver)return()=>{};const s=new o.ResizeObserver(l=>{const a=()=>{const u=l[0];if(u?.borderBoxSize){const r=u.borderBoxSize[0];if(r){n({width:r.inlineSize,height:r.blockSize});return}}n($e(e))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()});return s.observe(e,{box:"border-box"}),()=>{s.unobserve(e)}},Re={passive:!0},Pe=typeof window>"u"?!0:"onscrollend"in window,Lt=(t,i)=>{const e=t.scrollElement;if(!e)return;const o=t.targetWindow;if(!o)return;let n=0;const s=t.options.useScrollendEvent&&Pe?()=>{}:zt(o,()=>{i(n,!1)},t.options.isScrollingResetDelay),l=d=>()=>{const{horizontal:b,isRtl:c}=t.options;n=b?e.scrollLeft*(c&&-1||1):e.scrollTop,s(),i(n,d)},a=l(!0),u=l(!1);e.addEventListener("scroll",a,Re);const r=t.options.useScrollendEvent&&Pe;return r&&e.addEventListener("scrollend",u,Re),()=>{e.removeEventListener("scroll",a),r&&e.removeEventListener("scrollend",u)}},Wt=(t,i,e)=>{if(i?.borderBoxSize){const o=i.borderBoxSize[0];if(o)return Math.round(o[e.options.horizontal?"inlineSize":"blockSize"])}return t[e.options.horizontal?"offsetWidth":"offsetHeight"]},Nt=(t,{adjustments:i=0,behavior:e},o)=>{var n,s;const l=t+i;(s=(n=o.scrollElement)==null?void 0:n.scrollTo)==null||s.call(n,{[o.options.horizontal?"left":"top"]:l,behavior:e})};class Bt{constructor(i){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.currentScrollToIndex=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const o=()=>e||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:e=new this.targetWindow.ResizeObserver(n=>{n.forEach(s=>{const l=()=>{this._measureElement(s.target,s)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()})}));return{disconnect:()=>{var n;(n=o())==null||n.disconnect(),e=null},observe:n=>{var s;return(s=o())==null?void 0:s.observe(n,{box:"border-box"})},unobserve:n=>{var s;return(s=o())==null?void 0:s.unobserve(n)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([o,n])=>{typeof n>"u"&&delete e[o]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Dt,rangeExtractor:_t,onChange:()=>{},measureElement:Wt,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...e}},this.notify=e=>{var o,n;(n=(o=this.options).onChange)==null||n.call(o,this,e)},this.maybeNotify=ne(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const o=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==o){if(this.cleanup(),!o){this.maybeNotify();return}this.scrollElement=o,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((e=this.scrollElement)==null?void 0:e.window)??null,this.elementsCache.forEach(n=>{this.observer.observe(n)}),this.unsubs.push(this.options.observeElementRect(this,n=>{this.scrollRect=n,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(n,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.getScrollOffset()<n?"forward":"backward":null,this.scrollOffset=n,this.isScrolling=s,this.maybeNotify()})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0})}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,o)=>{const n=new Map,s=new Map;for(let l=o-1;l>=0;l--){const a=e[l];if(n.has(a.lane))continue;const u=s.get(a.lane);if(u==null||a.end>u.end?s.set(a.lane,a):a.end<u.end&&n.set(a.lane,!0),n.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((l,a)=>l.end===a.end?l.index-a.index:l.end-a.end)[0]:void 0},this.getMeasurementOptions=ne(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(e,o,n,s,l,a)=>(this.prevLanes!==void 0&&this.prevLanes!==a&&(this.lanesChangedFlag=!0),this.prevLanes=a,this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:o,scrollMargin:n,getItemKey:s,enabled:l,lanes:a}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=ne(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:o,scrollMargin:n,getItemKey:s,enabled:l,lanes:a},u)=>{if(!l)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>e)for(const c of this.laneAssignments.keys())c>=e&&this.laneAssignments.delete(c);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&!this.lanesSettling&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(c=>{this.itemSizeCache.set(c.key,c.size)}));const r=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===e&&(this.lanesSettling=!1);const d=this.measurementsCache.slice(0,r),b=new Array(a).fill(void 0);for(let c=0;c<r;c++){const p=d[c];p&&(b[p.lane]=c)}for(let c=r;c<e;c++){const p=s(c),h=this.laneAssignments.get(c);let m,x;if(h!==void 0&&this.options.lanes>1){m=h;const E=b[m],z=E!==void 0?d[E]:void 0;x=z?z.end+this.options.gap:o+n}else{const E=this.options.lanes===1?d[c-1]:this.getFurthestMeasurement(d,c);x=E?E.end+this.options.gap:o+n,m=E?E.lane:c%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(c,m)}const w=u.get(p),T=typeof w=="number"?w:this.options.estimateSize(c),$=x+T;d[c]={index:c,start:x,size:T,end:$,key:p,lane:m},b[m]=c}return this.measurementsCache=d,d},{key:!1,debug:()=>this.options.debug}),this.calculateRange=ne(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(e,o,n,s)=>this.range=e.length>0&&o>0?jt({measurements:e,outerSize:o,scrollOffset:n,lanes:s}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=ne(()=>{let e=null,o=null;const n=this.calculateRange();return n&&(e=n.startIndex,o=n.endIndex),this.maybeNotify.updateDeps([this.isScrolling,e,o]),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,o]},(e,o,n,s,l)=>s===null||l===null?[]:e({startIndex:s,endIndex:l,overscan:o,count:n}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const o=this.options.indexAttribute,n=e.getAttribute(o);return n?parseInt(n,10):(console.warn(`Missing attribute name '${o}={index}' on measured element.`),-1)},this._measureElement=(e,o)=>{const n=this.indexFromElement(e),s=this.measurementsCache[n];if(!s)return;const l=s.key,a=this.elementsCache.get(l);a!==e&&(a&&this.observer.unobserve(a),this.observer.observe(e),this.elementsCache.set(l,e)),e.isConnected&&this.resizeItem(n,this.options.measureElement(e,o,this))},this.resizeItem=(e,o)=>{const n=this.measurementsCache[e];if(!n)return;const s=this.itemSizeCache.get(n.key)??n.size,l=o-s;l!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(n,l,this):n.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=l,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,o)),this.notify(!1))},this.measureElement=e=>{if(!e){this.elementsCache.forEach((o,n)=>{o.isConnected||(this.observer.unobserve(o),this.elementsCache.delete(n))});return}this._measureElement(e,void 0)},this.getVirtualItems=ne(()=>[this.getVirtualIndexes(),this.getMeasurements()],(e,o)=>{const n=[];for(let s=0,l=e.length;s<l;s++){const a=e[s],u=o[a];n.push(u)}return n},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const o=this.getMeasurements();if(o.length!==0)return Te(o[Ve(0,o.length-1,n=>Te(o[n]).start,e)])},this.getMaxScrollOffset=()=>{if(!this.scrollElement)return 0;if("scrollHeight"in this.scrollElement)return this.options.horizontal?this.scrollElement.scrollWidth-this.scrollElement.clientWidth:this.scrollElement.scrollHeight-this.scrollElement.clientHeight;{const e=this.scrollElement.document.documentElement;return this.options.horizontal?e.scrollWidth-this.scrollElement.innerWidth:e.scrollHeight-this.scrollElement.innerHeight}},this.getOffsetForAlignment=(e,o,n=0)=>{if(!this.scrollElement)return 0;const s=this.getSize(),l=this.getScrollOffset();o==="auto"&&(o=e>=l+s?"end":"start"),o==="center"?e+=(n-s)/2:o==="end"&&(e-=s);const a=this.getMaxScrollOffset();return Math.max(Math.min(a,e),0)},this.getOffsetForIndex=(e,o="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const n=this.measurementsCache[e];if(!n)return;const s=this.getSize(),l=this.getScrollOffset();if(o==="auto")if(n.end>=l+s-this.options.scrollPaddingEnd)o="end";else if(n.start<=l+this.options.scrollPaddingStart)o="start";else return[l,"start"];if(o==="end"&&e===this.options.count-1)return[this.getMaxScrollOffset(),o];const a=o==="end"?n.end+this.options.scrollPaddingEnd:n.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(a,o,n.size),o]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(e,{align:o="start",behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,o),{adjustments:void 0,behavior:n})},this.scrollToIndex=(e,{align:o="auto",behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e=Math.max(0,Math.min(e,this.options.count-1)),this.currentScrollToIndex=e;let s=0;const l=10,a=r=>{if(!this.targetWindow)return;const d=this.getOffsetForIndex(e,r);if(!d){console.warn("Failed to get offset for index:",e);return}const[b,c]=d;this._scrollToOffset(b,{adjustments:void 0,behavior:n}),this.targetWindow.requestAnimationFrame(()=>{const p=()=>{if(this.currentScrollToIndex!==e)return;const h=this.getScrollOffset(),m=this.getOffsetForIndex(e,c);if(!m){console.warn("Failed to get offset for index:",e);return}kt(m[0],h)||u(c)};this.isDynamicMode()?this.targetWindow.requestAnimationFrame(p):p()})},u=r=>{this.targetWindow&&this.currentScrollToIndex===e&&(s++,s<l?this.targetWindow.requestAnimationFrame(()=>a(r)):console.warn(`Failed to scroll to index ${e} after ${l} attempts.`))};a(o)},this.scrollBy=(e,{behavior:o}={})=>{o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:o})},this.getTotalSize=()=>{var e;const o=this.getMeasurements();let n;if(o.length===0)n=this.options.paddingStart;else if(this.options.lanes===1)n=((e=o[o.length-1])==null?void 0:e.end)??0;else{const s=Array(this.options.lanes).fill(null);let l=o.length-1;for(;l>=0&&s.some(a=>a===null);){const a=o[l];s[a.lane]===null&&(s[a.lane]=a.end),l--}n=Math.max(...s.filter(a=>a!==null))}return Math.max(n-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:o,behavior:n})=>{this.options.scrollToFn(e,{behavior:n,adjustments:o},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(i)}}const Ve=(t,i,e,o)=>{for(;t<=i;){const n=(t+i)/2|0,s=e(n);if(s<o)t=n+1;else if(s>o)i=n-1;else return n}return t>0?t-1:0};function jt({measurements:t,outerSize:i,scrollOffset:e,lanes:o}){const n=t.length-1,s=u=>t[u].start;if(t.length<=o)return{startIndex:0,endIndex:n};let l=Ve(0,n,s,e),a=l;if(o===1)for(;a<n&&t[a].end<e+i;)a++;else if(o>1){const u=Array(o).fill(0);for(;a<n&&u.some(d=>d<e+i);){const d=t[a];u[d.lane]=d.end,a++}const r=Array(o).fill(e+i);for(;l>=0&&r.some(d=>d>=e);){const d=t[l];r[d.lane]=d.start,l--}l=Math.max(0,l-l%o),a=Math.min(n,a+(o-1-a%o))}return{startIndex:l,endIndex:a}}const Fe=typeof document<"u"?v.useLayoutEffect:v.useEffect;function Ut({useFlushSync:t=!0,...i}){const e=v.useReducer(()=>({}),{})[1],o={...i,onChange:(s,l)=>{var a;t&&l?Z.flushSync(e):e(),(a=i.onChange)==null||a.call(i,s,l)}},[n]=v.useState(()=>new Bt(o));return n.setOptions(o),Fe(()=>n._didMount(),[]),Fe(()=>n._willUpdate()),n}function Ht(t){return Ut({observeElementRect:Vt,observeElementOffset:Lt,scrollToFn:Nt,...t})}function Le(t){let i=v.useRef({value:"",selectionStart:null,selectionEnd:null});return He(t,"blur",e=>{let o=e.target;Se(o)&&(i.current={value:o.value,selectionStart:o.selectionStart,selectionEnd:o.selectionEnd})}),P(()=>{if(!ke(t)&&Se(t)&&t.isConnected){if(t.focus({preventScroll:!0}),t.value!==i.current.value)t.setSelectionRange(t.value.length,t.value.length);else{let{selectionStart:e,selectionEnd:o}=i.current;e!==null&&o!==null&&t.setSelectionRange(e,o)}i.current={value:"",selectionStart:null,selectionEnd:null}}})}var Kt=Object.defineProperty,qt=(t,i,e)=>i in t?Kt(t,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[i]=e,Ae=(t,i,e)=>(qt(t,typeof i!="symbol"?i+"":i,e),e),g=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(g||{}),H=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(H||{}),X=(t=>(t[t.Pointer=0]="Pointer",t[t.Focus=1]="Focus",t[t.Other=2]="Other",t))(X||{}),We=(t=>(t[t.OpenCombobox=0]="OpenCombobox",t[t.CloseCombobox=1]="CloseCombobox",t[t.GoToOption=2]="GoToOption",t[t.SetTyping=3]="SetTyping",t[t.RegisterOption=4]="RegisterOption",t[t.UnregisterOption=5]="UnregisterOption",t[t.DefaultToFirstOption=6]="DefaultToFirstOption",t[t.SetActivationTrigger=7]="SetActivationTrigger",t[t.UpdateVirtualConfiguration=8]="UpdateVirtualConfiguration",t[t.SetInputElement=9]="SetInputElement",t[t.SetButtonElement=10]="SetButtonElement",t[t.SetOptionsElement=11]="SetOptionsElement",t[t.MarkInputAsMoved=12]="MarkInputAsMoved",t))(We||{});function ve(t,i=e=>e){let e=t.activeOptionIndex!==null?t.options[t.activeOptionIndex]:null,o=i(t.options.slice()),n=o.length>0&&o[0].dataRef.current.order!==null?o.sort((l,a)=>l.dataRef.current.order-a.dataRef.current.order):Ge(o,l=>l.dataRef.current.domRef.current),s=e?n.indexOf(e):null;return s===-1&&(s=null),{options:n,activeOptionIndex:s}}let Gt={1(t){var i;if((i=t.dataRef.current)!=null&&i.disabled||t.comboboxState===1)return t;let e=t.inputElement?re.Tracked(Et(t.inputElement)):t.inputPositionState;return{...t,activeOptionIndex:null,comboboxState:1,isTyping:!1,activationTrigger:2,inputPositionState:e,__demoMode:!1}},0(t){var i,e;if((i=t.dataRef.current)!=null&&i.disabled||t.comboboxState===0)return t;if((e=t.dataRef.current)!=null&&e.value){let o=t.dataRef.current.calculateIndex(t.dataRef.current.value);if(o!==-1)return{...t,activeOptionIndex:o,comboboxState:0,__demoMode:!1,inputPositionState:re.Idle}}return{...t,comboboxState:0,inputPositionState:re.Idle,__demoMode:!1}},3(t,i){return t.isTyping===i.isTyping?t:{...t,isTyping:i.isTyping}},2(t,i){var e,o,n,s;if((e=t.dataRef.current)!=null&&e.disabled||t.optionsElement&&!((o=t.dataRef.current)!=null&&o.optionsPropsRef.current.static)&&t.comboboxState===1)return t;if(t.virtual){let{options:r,disabled:d}=t.virtual,b=i.focus===A.Specific?i.idx:Me(i,{resolveItems:()=>r,resolveActiveIndex:()=>{var p,h;return(h=(p=t.activeOptionIndex)!=null?p:r.findIndex(m=>!d(m)))!=null?h:null},resolveDisabled:d,resolveId(){throw new Error("Function not implemented.")}}),c=(n=i.trigger)!=null?n:2;return t.activeOptionIndex===b&&t.activationTrigger===c?t:{...t,activeOptionIndex:b,activationTrigger:c,isTyping:!1,__demoMode:!1}}let l=ve(t);if(l.activeOptionIndex===null){let r=l.options.findIndex(d=>!d.dataRef.current.disabled);r!==-1&&(l.activeOptionIndex=r)}let a=i.focus===A.Specific?i.idx:Me(i,{resolveItems:()=>l.options,resolveActiveIndex:()=>l.activeOptionIndex,resolveId:r=>r.id,resolveDisabled:r=>r.dataRef.current.disabled}),u=(s=i.trigger)!=null?s:2;return t.activeOptionIndex===a&&t.activationTrigger===u?t:{...t,...l,isTyping:!1,activeOptionIndex:a,activationTrigger:u,__demoMode:!1}},4:(t,i)=>{var e,o,n,s;if((e=t.dataRef.current)!=null&&e.virtual)return{...t,options:[...t.options,i.payload]};let l=i.payload,a=ve(t,r=>(r.push(l),r));t.activeOptionIndex===null&&(n=(o=t.dataRef.current).isSelected)!=null&&n.call(o,i.payload.dataRef.current.value)&&(a.activeOptionIndex=a.options.indexOf(l));let u={...t,...a,activationTrigger:2};return(s=t.dataRef.current)!=null&&s.__demoMode&&t.dataRef.current.value===void 0&&(u.activeOptionIndex=0),u},5:(t,i)=>{var e;if((e=t.dataRef.current)!=null&&e.virtual)return{...t,options:t.options.filter(n=>n.id!==i.id)};let o=ve(t,n=>{let s=n.findIndex(l=>l.id===i.id);return s!==-1&&n.splice(s,1),n});return{...t,...o,activationTrigger:2}},6:(t,i)=>t.defaultToFirstOption===i.value?t:{...t,defaultToFirstOption:i.value},7:(t,i)=>t.activationTrigger===i.trigger?t:{...t,activationTrigger:i.trigger},8:(t,i)=>{var e,o;if(t.virtual===null)return{...t,virtual:{options:i.options,disabled:(e=i.disabled)!=null?e:()=>!1}};if(t.virtual.options===i.options&&t.virtual.disabled===i.disabled)return t;let n=t.activeOptionIndex;if(t.activeOptionIndex!==null){let s=i.options.indexOf(t.virtual.options[t.activeOptionIndex]);s!==-1?n=s:n=null}return{...t,activeOptionIndex:n,virtual:{options:i.options,disabled:(o=i.disabled)!=null?o:()=>!1}}},9:(t,i)=>t.inputElement===i.element?t:{...t,inputElement:i.element},10:(t,i)=>t.buttonElement===i.element?t:{...t,buttonElement:i.element},11:(t,i)=>t.optionsElement===i.element?t:{...t,optionsElement:i.element},12(t){return t.inputPositionState.kind!=="Tracked"?t:{...t,inputPositionState:re.Moved}}};class xe extends Ke{constructor(i){super(i),Ae(this,"actions",{onChange:e=>{let{onChange:o,compare:n,mode:s,value:l}=this.state.dataRef.current;return oe(s,{0:()=>o?.(e),1:()=>{let a=l.slice(),u=a.findIndex(r=>n(r,e));return u===-1?a.push(e):a.splice(u,1),o?.(a)}})},registerOption:(e,o)=>(this.send({type:4,payload:{id:e,dataRef:o}}),()=>{this.state.activeOptionIndex===this.state.dataRef.current.calculateIndex(o.current.value)&&this.send({type:6,value:!0}),this.send({type:5,id:e})}),goToOption:(e,o)=>(this.send({type:6,value:!1}),this.send({type:2,...e,trigger:o})),setIsTyping:e=>{this.send({type:3,isTyping:e})},closeCombobox:()=>{var e,o;this.send({type:1}),this.send({type:6,value:!1}),(o=(e=this.state.dataRef.current).onClose)==null||o.call(e)},openCombobox:()=>{this.send({type:0}),this.send({type:6,value:!0})},setActivationTrigger:e=>{this.send({type:7,trigger:e})},selectActiveOption:()=>{let e=this.selectors.activeOptionIndex(this.state);if(e!==null){if(this.actions.setIsTyping(!1),this.state.virtual)this.actions.onChange(this.state.virtual.options[e]);else{let{dataRef:o}=this.state.options[e];this.actions.onChange(o.current.value)}this.actions.goToOption({focus:A.Specific,idx:e})}},setInputElement:e=>{this.send({type:9,element:e})},setButtonElement:e=>{this.send({type:10,element:e})},setOptionsElement:e=>{this.send({type:11,element:e})}}),Ae(this,"selectors",{activeDescendantId:e=>{var o,n;let s=this.selectors.activeOptionIndex(e);if(s!==null)return e.virtual?(n=e.options.find(l=>!l.dataRef.current.disabled&&e.dataRef.current.compare(l.dataRef.current.value,e.virtual.options[s])))==null?void 0:n.id:(o=e.options[s])==null?void 0:o.id},activeOptionIndex:e=>{if(e.defaultToFirstOption&&e.activeOptionIndex===null&&(e.virtual?e.virtual.options.length>0:e.options.length>0)){if(e.virtual){let{options:n,disabled:s}=e.virtual,l=n.findIndex(a=>{var u;return!((u=s?.(a))!=null&&u)});if(l!==-1)return l}let o=e.options.findIndex(n=>!n.dataRef.current.disabled);if(o!==-1)return o}return e.activeOptionIndex},activeOption:e=>{var o,n;let s=this.selectors.activeOptionIndex(e);return s===null?null:e.virtual?e.virtual.options[s??0]:(n=(o=e.options[s])==null?void 0:o.dataRef.current.value)!=null?n:null},isActive:(e,o,n)=>{var s;let l=this.selectors.activeOptionIndex(e);return l===null?!1:e.virtual?l===e.dataRef.current.calculateIndex(o):((s=e.options[l])==null?void 0:s.id)===n},shouldScrollIntoView:(e,o,n)=>!(e.virtual||e.__demoMode||e.comboboxState!==0||e.activationTrigger===0||!this.selectors.isActive(e,o,n)),didInputMove(e){return e.inputPositionState.kind==="Moved"}});{let e=this.state.id,o=ze.get(null);this.disposables.add(o.on(qe.Push,n=>{!o.selectors.isTop(n,e)&&this.state.comboboxState===0&&this.actions.closeCombobox()})),this.on(0,()=>o.actions.push(e)),this.on(1,()=>o.actions.pop(e))}this.disposables.group(e=>{this.on(1,o=>{o.inputElement&&(e.dispose(),e.add(Ot(o.inputElement,o.inputPositionState,()=>{this.send({type:12})})))})})}static new({id:i,virtual:e=null,__demoMode:o=!1}){var n;return new xe({id:i,dataRef:{current:{}},comboboxState:o?0:1,isTyping:!1,options:[],virtual:e?{options:e.options,disabled:(n=e.disabled)!=null?n:()=>!1}:null,activeOptionIndex:null,activationTrigger:2,inputElement:null,buttonElement:null,optionsElement:null,__demoMode:o,inputPositionState:re.Idle})}reduce(i,e){return oe(e.type,Gt,i,e)}}const Ne=v.createContext(null);function pe(t){let i=v.useContext(Ne);if(i===null){let e=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,Be),e}return i}function Be({id:t,virtual:i=null,__demoMode:e=!1}){let o=v.useMemo(()=>xe.new({id:t,virtual:i,__demoMode:e}),[]);return Xe(()=>o.dispose()),o}let ue=v.createContext(null);ue.displayName="ComboboxDataContext";function se(t){let i=v.useContext(ue);if(i===null){let e=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,se),e}return i}let je=v.createContext(null);function Xt(t){let i=pe("VirtualProvider"),e=se("VirtualProvider"),{options:o}=e.virtual,n=k(i,p=>p.optionsElement),[s,l]=v.useMemo(()=>{let p=n;if(!p)return[0,0];let h=window.getComputedStyle(p);return[parseFloat(h.paddingBlockStart||h.paddingTop),parseFloat(h.paddingBlockEnd||h.paddingBottom)]},[n]),a=Ht({enabled:o.length!==0,scrollPaddingStart:s,scrollPaddingEnd:l,count:o.length,estimateSize(){return 40},getScrollElement(){return i.state.optionsElement},overscan:12}),[u,r]=v.useState(0);ee(()=>{r(p=>p+1)},[o]);let d=a.getVirtualItems(),b=k(i,p=>p.activationTrigger===X.Pointer),c=k(i,i.selectors.activeOptionIndex);return d.length===0?null:L.createElement(je.Provider,{value:a},L.createElement("div",{style:{position:"relative",width:"100%",height:`${a.getTotalSize()}px`},ref:p=>{p&&(b||c!==null&&o.length>c&&a.scrollToIndex(c))}},d.map(p=>{var h;return L.createElement(v.Fragment,{key:p.key},L.cloneElement((h=t.children)==null?void 0:h.call(t,{...t.slot,option:o[p.index]}),{key:`${u}-${p.key}`,"data-index":p.index,"aria-setsize":o.length,"aria-posinset":p.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${p.start}px)`,overflowAnchor:"none"}}))})))}let Yt=v.Fragment;function Jt(t,i){let e=v.useId(),o=ct(),{value:n,defaultValue:s,onChange:l,form:a,name:u,by:r,invalid:d=!1,disabled:b=o||!1,onClose:c,__demoMode:p=!1,multiple:h=!1,immediate:m=!1,virtual:x=null,nullable:w,...T}=t,$=ft(s),[E=h?[]:void 0,z]=mt(n,l,$),O=Be({id:e,virtual:x,__demoMode:p}),W=v.useRef({static:!1,hold:!1}),R=pt(r),_=P(y=>x?r===null?x.options.indexOf(y):x.options.findIndex(Q=>R(Q,y)):O.state.options.findIndex(Q=>R(Q.dataRef.current.value,y))),q=v.useCallback(y=>oe(N.mode,{[H.Multi]:()=>E.some(Q=>R(Q,y)),[H.Single]:()=>R(E,y)}),[E]),G=k(O,y=>y.virtual),S=P(()=>c?.()),N=v.useMemo(()=>({__demoMode:p,immediate:m,optionsPropsRef:W,value:E,defaultValue:$,disabled:b,invalid:d,mode:h?H.Multi:H.Single,virtual:x?G:null,onChange:z,isSelected:q,calculateIndex:_,compare:R,onClose:S}),[p,m,W,E,$,b,d,h,x,G,z,q,_,R,S]);ee(()=>{var y;x&&O.send({type:We.UpdateVirtualConfiguration,options:x.options,disabled:(y=x.disabled)!=null?y:null})},[x,x?.options,x?.disabled]),ee(()=>{O.state.dataRef.current=N},[N]);let[B,C,K,ie]=k(O,y=>[y.comboboxState,y.buttonElement,y.inputElement,y.optionsElement]),Y=ze.get(null),te=k(Y,v.useCallback(y=>Y.selectors.isTop(y,e),[Y,e]));dt(te,[C,K,ie],()=>O.actions.closeCombobox());let J=k(O,O.selectors.activeOptionIndex),le=k(O,O.selectors.activeOption),f=de({open:B===g.Open,disabled:b,invalid:d,activeIndex:J,activeOption:le,value:E}),[U,M]=At(),D=i===null?{}:{ref:i},I=v.useCallback(()=>{if($!==void 0)return z?.($)},[z,$]),V=he();return L.createElement(M,{value:U,props:{htmlFor:K?.id},slot:{open:B===g.Open,disabled:b}},L.createElement(St,null,L.createElement(ue.Provider,{value:N},L.createElement(Ne.Provider,{value:O},L.createElement(ht,{value:oe(B,{[g.Open]:fe.Open,[g.Closed]:fe.Closed})},u!=null&&L.createElement($t,{disabled:b,data:E!=null?{[u]:E}:{},form:a,onReset:I}),V({ourProps:D,theirProps:T,slot:f,defaultTag:Yt,name:"Combobox"}))))))}let Qt="input";function Zt(t,i){var e,o;let n=pe("Combobox.Input"),s=se("Combobox.Input"),l=v.useId(),a=Ft(),{id:u=a||`headlessui-combobox-input-${l}`,onChange:r,displayValue:d,disabled:b=s.disabled||!1,autoFocus:c=!1,type:p="text",...h}=t,m=v.useRef(null),x=me(m,i,vt(),n.actions.setInputElement),[w,T]=k(n,f=>[f.comboboxState,f.isTyping]),$=Ye(),E=P(()=>{n.actions.onChange(null),n.state.optionsElement&&(n.state.optionsElement.scrollTop=0),n.actions.goToOption({focus:A.Nothing})}),z=v.useMemo(()=>{var f;return typeof d=="function"&&s.value!==void 0?(f=d(s.value))!=null?f:"":typeof s.value=="string"?s.value:""},[s.value,d]);Oe(([f,U],[M,D])=>{if(n.state.isTyping)return;let I=m.current;I&&((D===g.Open&&U===g.Closed||f!==M)&&(I.value=f),requestAnimationFrame(()=>{if(n.state.isTyping||!I||ke(I))return;let{selectionStart:V,selectionEnd:y}=I;Math.abs((y??0)-(V??0))===0&&V===0&&I.setSelectionRange(I.value.length,I.value.length)}))},[z,w,T]),Oe(([f],[U])=>{if(f===g.Open&&U===g.Closed){if(n.state.isTyping)return;let M=m.current;if(!M)return;let D=M.value,{selectionStart:I,selectionEnd:V,selectionDirection:y}=M;M.value="",M.value=D,y!==null?M.setSelectionRange(I,V,y):M.setSelectionRange(I,V)}},[w]);let O=v.useRef(!1),W=P(()=>{O.current=!0}),R=P(()=>{$.nextFrame(()=>{O.current=!1})}),_=P(f=>{switch(n.actions.setIsTyping(!0),f.key){case j.Enter:if(n.state.comboboxState!==g.Open||O.current)return;if(f.preventDefault(),f.stopPropagation(),n.selectors.activeOptionIndex(n.state)===null){n.actions.closeCombobox();return}n.actions.selectActiveOption(),s.mode===H.Single&&n.actions.closeCombobox();break;case j.ArrowDown:return f.preventDefault(),f.stopPropagation(),oe(n.state.comboboxState,{[g.Open]:()=>n.actions.goToOption({focus:A.Next}),[g.Closed]:()=>n.actions.openCombobox()});case j.ArrowUp:return f.preventDefault(),f.stopPropagation(),oe(n.state.comboboxState,{[g.Open]:()=>n.actions.goToOption({focus:A.Previous}),[g.Closed]:()=>{Z.flushSync(()=>n.actions.openCombobox()),s.value||n.actions.goToOption({focus:A.Last})}});case j.Home:if(n.state.comboboxState===g.Closed||f.shiftKey)break;return f.preventDefault(),f.stopPropagation(),n.actions.goToOption({focus:A.First});case j.PageUp:return f.preventDefault(),f.stopPropagation(),n.actions.goToOption({focus:A.First});case j.End:if(n.state.comboboxState===g.Closed||f.shiftKey)break;return f.preventDefault(),f.stopPropagation(),n.actions.goToOption({focus:A.Last});case j.PageDown:return f.preventDefault(),f.stopPropagation(),n.actions.goToOption({focus:A.Last});case j.Escape:return n.state.comboboxState!==g.Open?void 0:(f.preventDefault(),n.state.optionsElement&&!s.optionsPropsRef.current.static&&f.stopPropagation(),s.mode===H.Single&&s.value===null&&E(),n.actions.closeCombobox());case j.Tab:if(n.actions.setIsTyping(!1),n.state.comboboxState!==g.Open)return;s.mode===H.Single&&n.state.activationTrigger!==X.Focus&&n.actions.selectActiveOption(),n.actions.closeCombobox();break}}),q=P(f=>{r?.(f),s.mode===H.Single&&f.target.value===""&&E(),n.actions.openCombobox()}),G=P(f=>{var U,M,D;let I=(U=f.relatedTarget)!=null?U:Ee.find(V=>V!==f.currentTarget);if(!((M=n.state.optionsElement)!=null&&M.contains(I))&&!((D=n.state.buttonElement)!=null&&D.contains(I))&&n.state.comboboxState===g.Open)return f.preventDefault(),s.mode===H.Single&&s.value===null&&E(),n.actions.closeCombobox()}),S=P(f=>{var U,M,D;let I=(U=f.relatedTarget)!=null?U:Ee.find(V=>V!==f.currentTarget);(M=n.state.buttonElement)!=null&&M.contains(I)||(D=n.state.optionsElement)!=null&&D.contains(I)||s.disabled||s.immediate&&n.state.comboboxState!==g.Open&&$.microTask(()=>{Z.flushSync(()=>n.actions.openCombobox()),n.actions.setActivationTrigger(X.Focus)})}),N=be(),B=Je(),{isFocused:C,focusProps:K}=De({autoFocus:c}),{isHovered:ie,hoverProps:Y}=_e({isDisabled:b}),te=k(n,f=>f.optionsElement),J=de({open:w===g.Open,disabled:b,invalid:s.invalid,hover:ie,focus:C,autofocus:c}),le=ge({ref:x,id:u,role:"combobox",type:p,"aria-controls":te?.id,"aria-expanded":w===g.Open,"aria-activedescendant":k(n,n.selectors.activeDescendantId),"aria-labelledby":N,"aria-describedby":B,"aria-autocomplete":"list",defaultValue:(o=(e=t.defaultValue)!=null?e:s.defaultValue!==void 0?d?.(s.defaultValue):null)!=null?o:s.defaultValue,disabled:b||void 0,autoFocus:c,onCompositionStart:W,onCompositionEnd:R,onKeyDown:_,onChange:q,onFocus:S,onBlur:G},K,Y);return he()({ourProps:le,theirProps:h,slot:J,defaultTag:Qt,name:"Combobox.Input"})}let en="button";function tn(t,i){let e=pe("Combobox.Button"),o=se("Combobox.Button"),[n,s]=v.useState(null),l=me(i,s,e.actions.setButtonElement),a=v.useId(),{id:u=`headlessui-combobox-button-${a}`,disabled:r=o.disabled||!1,autoFocus:d=!1,...b}=t,[c,p,h]=k(e,S=>[S.comboboxState,S.inputElement,S.optionsElement]),m=Le(p),x=c===g.Open;It(x,{trigger:n,action:v.useCallback(S=>{if(n!=null&&n.contains(S.target))return ae.Ignore;if(p!=null&&p.contains(S.target))return ae.Ignore;let N=S.target.closest('[role="option"]:not([data-disabled])');return rt(N)?ae.Select(N):h!=null&&h.contains(S.target)?ae.Ignore:ae.Close},[n,p,h]),close:e.actions.closeCombobox,select:e.actions.selectActiveOption});let w=P(S=>{switch(S.key){case j.Space:case j.Enter:S.preventDefault(),S.stopPropagation(),e.state.comboboxState===g.Closed&&Z.flushSync(()=>e.actions.openCombobox()),m();return;case j.ArrowDown:S.preventDefault(),S.stopPropagation(),e.state.comboboxState===g.Closed&&(Z.flushSync(()=>e.actions.openCombobox()),e.state.dataRef.current.value||e.actions.goToOption({focus:A.First})),m();return;case j.ArrowUp:S.preventDefault(),S.stopPropagation(),e.state.comboboxState===g.Closed&&(Z.flushSync(()=>e.actions.openCombobox()),e.state.dataRef.current.value||e.actions.goToOption({focus:A.Last})),m();return;case j.Escape:if(e.state.comboboxState!==g.Open)return;S.preventDefault(),e.state.optionsElement&&!o.optionsPropsRef.current.static&&S.stopPropagation(),Z.flushSync(()=>e.actions.closeCombobox()),m();return;default:return}}),T=Mt(()=>{e.state.comboboxState===g.Open?e.actions.closeCombobox():e.actions.openCombobox(),m()}),$=be([u]),{isFocusVisible:E,focusProps:z}=De({autoFocus:d}),{isHovered:O,hoverProps:W}=_e({isDisabled:r}),{pressed:R,pressProps:_}=ut({disabled:r}),q=de({open:c===g.Open,active:R||c===g.Open,disabled:r,invalid:o.invalid,value:o.value,hover:O,focus:E}),G=ge({ref:l,id:u,type:wt(t,n),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":h?.id,"aria-expanded":c===g.Open,"aria-labelledby":$,disabled:r||void 0,autoFocus:d,onKeyDown:w},T,z,W,_);return he()({ourProps:G,theirProps:b,slot:q,defaultTag:en,name:"Combobox.Button"})}let nn="div",on=ye.RenderStrategy|ye.Static;function sn(t,i){var e,o,n;let s=v.useId(),{id:l=`headlessui-combobox-options-${s}`,hold:a=!1,anchor:u,portal:r=!1,modal:d=!0,transition:b=!1,...c}=t,p=pe("Combobox.Options"),h=se("Combobox.Options"),m=gt(u);m&&(r=!0);let[x,w]=bt(m),[T,$]=v.useState(null),E=xt(),z=me(i,m?x:null,p.actions.setOptionsElement,$),[O,W,R,_,q]=k(p,F=>[F.comboboxState,F.inputElement,F.buttonElement,F.optionsElement,F.activationTrigger]),G=Ce(W||R),S=Ce(_),N=Qe(),[B,C]=Ze(b,T,N!==null?(N&fe.Open)===fe.Open:O===g.Open);et(B,W,p.actions.closeCombobox);let K=h.__demoMode?!1:d&&O===g.Open;tt(K,S);let ie=h.__demoMode?!1:d&&O===g.Open;nt(ie,{allowed:v.useCallback(()=>[W,R,_],[W,R,_])});let Y=k(p,p.selectors.didInputMove)?!1:B;ee(()=>{var F;h.optionsPropsRef.current.static=(F=t.static)!=null?F:!1},[h.optionsPropsRef,t.static]),ee(()=>{h.optionsPropsRef.current.hold=a},[h.optionsPropsRef,a]),Tt(O===g.Open,{container:_,accept(F){return F.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:F.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(F){F.setAttribute("role","none")}});let te=be([R?.id]),J=de({open:O===g.Open,option:void 0}),le=P(()=>{p.actions.setActivationTrigger(X.Pointer)}),f=P(F=>{F.preventDefault(),p.actions.setActivationTrigger(X.Pointer)}),U=ge(m?E():{},{"aria-labelledby":te,role:"listbox","aria-multiselectable":h.mode===H.Multi?!0:void 0,id:l,ref:z,style:{...c.style,...w,"--input-width":Ie(B,W,!0).width,"--button-width":Ie(B,R,!0).width},onWheel:q===X.Pointer?void 0:le,onMouseDown:f,...ot(C)}),M=B&&O===g.Closed&&!t.static,D=we(M,(e=h.virtual)==null?void 0:e.options),I=we(M,h.value),V=v.useCallback(F=>h.compare(I,F),[h.compare,I]),y=v.useMemo(()=>{if(!h.virtual)return h;if(D===void 0)throw new Error("Missing `options` in virtual mode");return D!==h.virtual.options?{...h,virtual:{...h.virtual,options:D}}:h},[h,D,(o=h.virtual)==null?void 0:o.options]);h.virtual&&Object.assign(c,{children:L.createElement(ue.Provider,{value:y},L.createElement(Xt,{slot:J},c.children))});let Q=he(),Ue=v.useMemo(()=>h.mode===H.Multi?h:{...h,isSelected:V},[h,V]);return L.createElement(st,{enabled:r?t.static||B:!1,ownerDocument:G},L.createElement(ue.Provider,{value:Ue},Q({ourProps:U,theirProps:{...c,children:L.createElement(Rt,{freeze:M},typeof c.children=="function"?(n=c.children)==null?void 0:n.call(c,J):c.children)},slot:J,defaultTag:nn,features:on,visible:Y,name:"Combobox.Options"})))}let ln="div";function an(t,i){var e,o,n;let s=se("Combobox.Option"),l=pe("Combobox.Option"),a=v.useId(),{id:u=`headlessui-combobox-option-${a}`,value:r,disabled:d=(n=(o=(e=s.virtual)==null?void 0:e.disabled)==null?void 0:o.call(e,r))!=null?n:!1,order:b=null,...c}=t,[p]=k(l,C=>[C.inputElement]),h=Le(p),m=k(l,v.useCallback(C=>l.selectors.isActive(C,r,u),[r,u])),x=s.isSelected(r),w=v.useRef(null),T=it({disabled:d,value:r,domRef:w,order:b}),$=v.useContext(je),E=me(i,w,$?$.measureElement:null),z=P(()=>{l.actions.setIsTyping(!1),l.actions.onChange(r)});ee(()=>l.actions.registerOption(u,T),[T,u]);let O=k(l,v.useCallback(C=>l.selectors.shouldScrollIntoView(C,r,u),[r,u]));ee(()=>{if(O)return lt().requestAnimationFrame(()=>{var C,K;(K=(C=w.current)==null?void 0:C.scrollIntoView)==null||K.call(C,{block:"nearest"})})},[O,w]);let W=P(C=>{C.preventDefault(),C.button===Ct.Left&&(d||(z(),at()||requestAnimationFrame(()=>h()),s.mode===H.Single&&l.actions.closeCombobox()))}),R=P(()=>{if(d)return l.actions.goToOption({focus:A.Nothing});let C=s.calculateIndex(r);l.actions.goToOption({focus:A.Specific,idx:C})}),_=yt(),q=P(C=>_.update(C)),G=P(C=>{if(!_.wasMoved(C)||d||m&&l.state.activationTrigger===X.Pointer)return;let K=s.calculateIndex(r);l.actions.goToOption({focus:A.Specific,idx:K},X.Pointer)}),S=P(C=>{_.wasMoved(C)&&(d||m&&(s.optionsPropsRef.current.hold||l.state.activationTrigger===X.Pointer&&l.actions.goToOption({focus:A.Nothing})))}),N=de({active:m,focus:m,selected:x,disabled:d}),B={id:u,ref:E,role:"option",tabIndex:d===!0?void 0:-1,"aria-disabled":d===!0?!0:void 0,"aria-selected":x,disabled:void 0,onMouseDown:W,onFocus:R,onPointerEnter:q,onMouseEnter:q,onPointerMove:G,onMouseMove:G,onPointerLeave:S,onMouseLeave:S};return he()({ourProps:B,theirProps:c,slot:N,defaultTag:ln,name:"Combobox.Option"})}let rn=ce(Jt),un=ce(tn),cn=ce(Zt),dn=Pt,hn=ce(sn),pn=ce(an),yn=Object.assign(rn,{Input:cn,Button:un,Label:dn,Options:hn,Option:pn});export{un as B,yn as H,hn as U,pn as a,cn as k};
