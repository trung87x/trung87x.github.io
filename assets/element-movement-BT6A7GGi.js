import{r as c,o as p,X as v,Z as w,_ as x,F as $}from"./index-CvCVbuS9.js";import{s as h}from"./bugs-qQ_SbDk4.js";var m=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(m||{});function M(e){let n=c.useRef(null),t=p(u=>{n.current=u.pointerType,!h(u.currentTarget)&&u.pointerType==="mouse"&&u.button===m.Left&&(u.preventDefault(),e(u))}),s=p(u=>{n.current!=="mouse"&&(h(u.currentTarget)||e(u))});return{onPointerDown:t,onClick:s}}var R=(e=>(e[e.Ignore=0]="Ignore",e[e.Select=1]="Select",e[e.Close=2]="Close",e))(R||{});const C={Ignore:{kind:0},Select:e=>({kind:1,target:e}),Close:{kind:2}},I=200,k=5;function E(e,{trigger:n,action:t,close:s,select:u}){let r=c.useRef(null),o=c.useRef(null),i=c.useRef(null);v(e&&n!==null,"pointerdown",l=>{w(l?.target)&&n!=null&&n.contains(l.target)&&(o.current=l.x,i.current=l.y,r.current=l.timeStamp)}),v(e&&n!==null,"pointerup",l=>{var a,d;let f=r.current;if(f===null||(r.current=null,!x(l.target))||Math.abs(l.x-((a=o.current)!=null?a:l.x))<k&&Math.abs(l.y-((d=i.current)!=null?d:l.y))<k)return;let g=t(l);switch(g.kind){case 0:return;case 1:{l.timeStamp-f>I&&(u(g.target),s());break}case 2:{s();break}}},{capture:!0})}function b(e){return[e.screenX,e.screenY]}function N(){let e=c.useRef([-1,-1]);return{wasMoved(n){let t=b(n);return e.current[0]===t[0]&&e.current[1]===t[1]?!1:(e.current=t,!0)},update(n){e.current=b(n)}}}function L(e){throw new Error("Unexpected object: "+e)}var S=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(S||{});function F(e,n){let t=n.resolveItems();if(t.length<=0)return null;let s=n.resolveActiveIndex(),u=s??-1;switch(e.focus){case 0:{for(let r=0;r<t.length;++r)if(!n.resolveDisabled(t[r],r,t))return r;return s}case 1:{u===-1&&(u=t.length);for(let r=u-1;r>=0;--r)if(!n.resolveDisabled(t[r],r,t))return r;return s}case 2:{for(let r=u+1;r<t.length;++r)if(!n.resolveDisabled(t[r],r,t))return r;return s}case 3:{for(let r=t.length-1;r>=0;--r)if(!n.resolveDisabled(t[r],r,t))return r;return s}case 4:{for(let r=0;r<t.length;++r)if(n.resolveId(t[r],r,t)===e.id)return r;return s}case 5:return null;default:L(e)}}const P={Idle:{kind:"Idle"},Tracked:e=>({kind:"Tracked",position:e}),Moved:{kind:"Moved"}};function T(e){let n=e.getBoundingClientRect();return`${n.x},${n.y}`}function z(e,n,t){let s=$();if(n.kind==="Tracked"){let u=function(){r!==T(e)&&(s.dispose(),t())},{position:r}=n,o=new ResizeObserver(u);o.observe(e),s.add(()=>o.disconnect()),s.addEventListener(window,"scroll",u,{passive:!0}),s.addEventListener(window,"resize",u)}return()=>s.dispose()}export{E as L,C as S,S as a,T as b,P as c,F as f,m as g,z as p,M as s,N as u};
