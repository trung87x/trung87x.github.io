import{r as c,G as i}from"./index-BUE_4nSx.js";import{o as De}from"./keyboard-C1Wiwm26.js";import{E as le}from"./use-event-listener-DpzbZMQu.js";import{I as z,u as ue,c as ke,e as Pe,x as Ce,S as Ie,k as Se,f as Re,p as xe,l as J,t as Ae,X as Oe}from"./portal-DcpW2Nz_.js";import{n as ie,Y as S,o as k,u as V,p as Le,K as A,t as se,A as Z}from"./render-CNyBWpu3.js";import{y as Ne}from"./use-inert-others-BaroeGy-.js";import{u as Be,a as O,j as ee,x as Ye,S as Me}from"./use-tab-direction-D2DDqWO7.js";import{l as ce,O as fe,K as Ke}from"./transition-C2KOCvAu.js";import{n as B}from"./use-slot-BZcd_w4P.js";import{y as Y}from"./use-sync-refs-Dh0umLOC.js";import{C as je}from"./close-provider-CYB1hxin.js";import{u as de,i as L,s as Ge}from"./open-closed-BGpwrHHP.js";import{M as Ve,H as ze}from"./description-11b0SVwG.js";import{f as pe}from"./use-is-mounted-CiYMpse4.js";import{m as H,n as G}from"./active-element-history-NQ_rx8nl.js";import{f as te,s as re}from"./hidden-c0o-GYKL.js";import{n as N,i as ne,t as He}from"./dom-BlW_0b_t.js";import{v as x,T as h,w,A as oe}from"./focus-management-C0S51YJM.js";import{d as Qe}from"./owner-C7ikqkQc.js";function Ue(e,t=typeof document<"u"?document.defaultView:null,r){let n=z(e,"escape");le(t,"keydown",o=>{n&&(o.defaultPrevented||o.key===De.Escape&&r(o))})}function We(){var e;let[t]=c.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[r,n]=c.useState((e=t?.matches)!=null?e:!1);return ie(()=>{if(!t)return;function o(l){n(l.matches)}return t.addEventListener("change",o),()=>t.removeEventListener("change",o)},[t]),r}function me(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let r of e.current)He(r.current)&&t.add(r.current);return t}let qe="div";var D=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(D||{});function Xe(e,t){let r=c.useRef(null),n=Y(r,t),{initialFocus:o,initialFocusFallback:l,containers:s,features:a=15,...f}=e;ce()||(a=0);let u=ue(r.current);et(a,{ownerDocument:u});let p=tt(a,{ownerDocument:u,container:r,initialFocus:o,initialFocusFallback:l});rt(a,{ownerDocument:u,container:r,containers:s,previousActiveElement:p});let P=Be(),F=k(m=>{if(!N(r.current))return;let y=r.current;(g=>g())(()=>{V(P.current,{[O.Forwards]:()=>{x(y,h.First,{skipElements:[m.relatedTarget,l]})},[O.Backwards]:()=>{x(y,h.Last,{skipElements:[m.relatedTarget,l]})}})})}),E=z(!!(a&2),"focus-trap#tab-lock"),v=Le(),b=c.useRef(!1),T={ref:n,onKeyDown(m){m.key=="Tab"&&(b.current=!0,v.requestAnimationFrame(()=>{b.current=!1}))},onBlur(m){if(!(a&4))return;let y=me(s);N(r.current)&&y.add(r.current);let g=m.relatedTarget;ne(g)&&g.dataset.headlessuiFocusGuard!=="true"&&(ge(y,g)||(b.current?x(r.current,V(P.current,{[O.Forwards]:()=>h.Next,[O.Backwards]:()=>h.Previous})|h.WrapAround,{relativeTo:m.target}):ne(m.target)&&w(m.target)))}},$=A();return i.createElement(i.Fragment,null,E&&i.createElement(te,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:F,features:re.Focusable}),$({ourProps:T,theirProps:f,defaultTag:qe,name:"FocusTrap"}),E&&i.createElement(te,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:F,features:re.Focusable}))}let _e=S(Xe),Je=Object.assign(_e,{features:D});function Ze(e=!0){let t=c.useRef(G.slice());return H(([r],[n])=>{n===!0&&r===!1&&se(()=>{t.current.splice(0)}),n===!1&&r===!0&&(t.current=G.slice())},[e,G,t]),k(()=>{var r;return(r=t.current.find(n=>n!=null&&n.isConnected))!=null?r:null})}function et(e,{ownerDocument:t}){let r=!!(e&8),n=Ze(r);H(()=>{r||Qe(t?.body)&&w(n())},[r]),ke(()=>{r&&w(n())})}function tt(e,{ownerDocument:t,container:r,initialFocus:n,initialFocusFallback:o}){let l=c.useRef(null),s=z(!!(e&1),"focus-trap#initial-focus"),a=pe();return H(()=>{if(e===0)return;if(!s){o!=null&&o.current&&w(o.current);return}let f=r.current;f&&se(()=>{if(!a.current)return;let u=t?.activeElement;if(n!=null&&n.current){if(n?.current===u){l.current=u;return}}else if(f.contains(u)){l.current=u;return}if(n!=null&&n.current)w(n.current);else{if(e&16){if(x(f,h.First|h.AutoFocus)!==oe.Error)return}else if(x(f,h.First)!==oe.Error)return;if(o!=null&&o.current&&(w(o.current),t?.activeElement===o.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}l.current=t?.activeElement})},[o,s,e]),l}function rt(e,{ownerDocument:t,container:r,containers:n,previousActiveElement:o}){let l=pe(),s=!!(e&4);le(t?.defaultView,"focus",a=>{if(!s||!l.current)return;let f=me(n);N(r.current)&&f.add(r.current);let u=o.current;if(!u)return;let p=a.target;N(p)?ge(f,p)?(o.current=p,w(p)):(a.preventDefault(),a.stopPropagation(),w(u)):w(o.current)},!0)}function ge(e,t){for(let r of e)if(r.contains(t))return!0;return!1}var nt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(nt||{}),ot=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(ot||{});let at={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Q=c.createContext(null);Q.displayName="DialogContext";function M(e){let t=c.useContext(Q);if(t===null){let r=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,M),r}return t}function lt(e,t){return V(t.type,at,e,t)}let ae=S(function(e,t){let r=c.useId(),{id:n=`headlessui-dialog-${r}`,open:o,onClose:l,initialFocus:s,role:a="dialog",autoFocus:f=!0,__demoMode:u=!1,unmount:p=!1,...P}=e,F=c.useRef(!1);a=(function(){return a==="dialog"||a==="alertdialog"?a:(F.current||(F.current=!0,console.warn(`Invalid role [${a}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let E=de();o===void 0&&E!==null&&(o=(E&L.Open)===L.Open);let v=c.useRef(null),b=Y(v,t),T=ue(v.current),$=o?0:1,[m,y]=c.useReducer(lt,{titleId:null,descriptionId:null,panelRef:c.createRef()}),g=k(()=>l(!1)),U=k(d=>y({type:0,id:d})),C=ce()?$===0:!1,[ve,Ee]=Pe(),we={get current(){var d;return(d=m.panelRef.current)!=null?d:v.current}},K=Ye(),{resolveContainers:j}=Me({mainTreeNode:K,portals:ve,defaultContainers:[we]}),W=E!==null?(E&L.Closing)===L.Closing:!1;Ne(u||W?!1:C,{allowed:k(()=>{var d,_;return[(_=(d=v.current)==null?void 0:d.closest("[data-headlessui-portal]"))!=null?_:null]}),disallowed:k(()=>{var d;return[(d=K?.closest("body > *:not(#headlessui-portal-root)"))!=null?d:null]})});let I=Ce.get(null);ie(()=>{if(C)return I.actions.push(n),()=>I.actions.pop(n)},[I,n,C]);let q=Ie(I,c.useCallback(d=>I.selectors.isTop(d,n),[I,n]));Se(q,j,d=>{d.preventDefault(),g()}),Ue(q,T?.defaultView,d=>{d.preventDefault(),d.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),g()}),Re(u||W?!1:C,T,j),xe(C,v,g);let[$e,he]=ze(),Fe=c.useMemo(()=>[{dialogState:$,close:g,setTitleId:U,unmount:p},m],[$,g,U,p,m]),X=B({open:$===0}),be={ref:b,id:n,role:a,tabIndex:-1,"aria-modal":u?void 0:$===0?!0:void 0,"aria-labelledby":m.titleId,"aria-describedby":$e,unmount:p},Te=!We(),R=D.None;C&&!u&&(R|=D.RestoreFocus,R|=D.TabLock,f&&(R|=D.AutoFocus),Te&&(R|=D.InitialFocus));let ye=A();return i.createElement(Ge,null,i.createElement(J,{force:!0},i.createElement(Ae,null,i.createElement(Q.Provider,{value:Fe},i.createElement(Oe,{target:v},i.createElement(J,{force:!1},i.createElement(he,{slot:X},i.createElement(Ee,null,i.createElement(Je,{initialFocus:s,initialFocusFallback:v,containers:j,features:R},i.createElement(je,{value:g},ye({ourProps:be,theirProps:P,slot:X,defaultTag:ut,features:it,visible:$===0,name:"Dialog"})))))))))))}),ut="div",it=Z.RenderStrategy|Z.Static;function st(e,t){let{transition:r=!1,open:n,...o}=e,l=de(),s=e.hasOwnProperty("open")||l!==null,a=e.hasOwnProperty("onClose");if(!s&&!a)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!s)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!a)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!l&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(n!==void 0||r)&&!o.static?i.createElement(ee,null,i.createElement(Ke,{show:n,transition:r,unmount:o.unmount},i.createElement(ae,{ref:t,...o}))):i.createElement(ee,null,i.createElement(ae,{ref:t,open:n,...o}))}let ct="div";function ft(e,t){let r=c.useId(),{id:n=`headlessui-dialog-panel-${r}`,transition:o=!1,...l}=e,[{dialogState:s,unmount:a},f]=M("Dialog.Panel"),u=Y(t,f.panelRef),p=B({open:s===0}),P=k(T=>{T.stopPropagation()}),F={ref:u,id:n,onClick:P},E=o?fe:c.Fragment,v=o?{unmount:a}:{},b=A();return i.createElement(E,{...v},b({ourProps:F,theirProps:l,slot:p,defaultTag:ct,name:"Dialog.Panel"}))}let dt="div";function pt(e,t){let{transition:r=!1,...n}=e,[{dialogState:o,unmount:l}]=M("Dialog.Backdrop"),s=B({open:o===0}),a={ref:t,"aria-hidden":!0},f=r?fe:c.Fragment,u=r?{unmount:l}:{},p=A();return i.createElement(f,{...u},p({ourProps:a,theirProps:n,slot:s,defaultTag:dt,name:"Dialog.Backdrop"}))}let mt="h2";function gt(e,t){let r=c.useId(),{id:n=`headlessui-dialog-title-${r}`,...o}=e,[{dialogState:l,setTitleId:s}]=M("Dialog.Title"),a=Y(t);c.useEffect(()=>(s(n),()=>s(null)),[n,s]);let f=B({open:l===0}),u={ref:a,id:n};return A()({ourProps:u,theirProps:o,slot:f,defaultTag:mt,name:"Dialog.Title"})}let vt=S(st),Et=S(ft),Yt=S(pt),wt=S(gt),Mt=Object.assign(vt,{Panel:Et,Title:wt,Description:Ve});export{Yt as L,wt as Q,Mt as h,Et as z};
