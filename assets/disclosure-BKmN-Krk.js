import{$ as J,a as Y}from"./useFocusRing-V2q2gMLK.js";import{G as S,r}from"./index-l14UwtrU.js";import{w as _,e as q}from"./use-resolve-button-type-CGubDCBk.js";import{Y as x,y as T,o as I,V as A,K as h,T as z,b as Q,u as k,A as X}from"./use-sync-refs-BsWuDQXH.js";import{a as w,l as W,i as G,o as P}from"./keyboard-_GcYenTI.js";import{u as Z,N as ee,i as g,x as te,s as le,c as re}from"./open-closed-RpbutWOZ.js";import{C as ne}from"./close-provider-DlhRlO9O.js";import{s as oe}from"./bugs-DEMHSJe6.js";var H;let se=(H=S.startTransition)!=null?H:function(e){e()};var ae=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ae||{}),ue=(e=>(e[e.ToggleDisclosure=0]="ToggleDisclosure",e[e.CloseDisclosure=1]="CloseDisclosure",e[e.SetButtonId=2]="SetButtonId",e[e.SetPanelId=3]="SetPanelId",e[e.SetButtonElement=4]="SetButtonElement",e[e.SetPanelElement=5]="SetPanelElement",e))(ue||{});let ce={0:e=>({...e,disclosureState:k(e.disclosureState,{0:1,1:0})}),1:e=>e.disclosureState===1?e:{...e,disclosureState:1},2(e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},3(e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}},4(e,t){return e.buttonElement===t.element?e:{...e,buttonElement:t.element}},5(e,t){return e.panelElement===t.element?e:{...e,panelElement:t.element}}},B=r.createContext(null);B.displayName="DisclosureContext";function F(e){let t=r.useContext(B);if(t===null){let u=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(u,F),u}return t}let O=r.createContext(null);O.displayName="DisclosureAPIContext";function L(e){let t=r.useContext(O);if(t===null){let u=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(u,L),u}return t}let R=r.createContext(null);R.displayName="DisclosurePanelContext";function ie(){return r.useContext(R)}function de(e,t){return k(t.type,ce,e,t)}let pe=r.Fragment;function fe(e,t){let{defaultOpen:u=!1,...i}=e,c=r.useRef(null),d=T(t,z(s=>{c.current=s},e.as===void 0||Q(e.as))),p=r.useReducer(de,{disclosureState:u?0:1,buttonElement:null,panelElement:null,buttonId:null,panelId:null}),[{disclosureState:l,buttonId:n},b]=p,o=I(s=>{b({type:1});let m=W(c.current);if(!m||!n)return;let E=s?G(s)?s:"current"in s&&G(s.current)?s.current:m.getElementById(n):m.getElementById(n);E?.focus()}),$=r.useMemo(()=>({close:o}),[o]),f=w({open:l===0,close:o}),y={ref:d},v=h();return S.createElement(B.Provider,{value:p},S.createElement(O.Provider,{value:$},S.createElement(ne,{value:o},S.createElement(re,{value:k(l,{0:g.Open,1:g.Closed})},v({ourProps:y,theirProps:i,slot:f,defaultTag:pe,name:"Disclosure"})))))}let me="button";function Ee(e,t){let u=r.useId(),{id:i=`headlessui-disclosure-button-${u}`,disabled:c=!1,autoFocus:d=!1,...p}=e,[l,n]=F("Disclosure.Button"),b=ie(),o=b===null?!1:b===l.panelId,$=r.useRef(null),f=T($,t,I(a=>{if(!o)return n({type:4,element:a})}));r.useEffect(()=>{if(!o)return n({type:2,buttonId:i}),()=>{n({type:2,buttonId:null})}},[i,n,o]);let y=I(a=>{var D;if(o){if(l.disclosureState===1)return;switch(a.key){case P.Space:case P.Enter:a.preventDefault(),a.stopPropagation(),n({type:0}),(D=l.buttonElement)==null||D.focus();break}}else switch(a.key){case P.Space:case P.Enter:a.preventDefault(),a.stopPropagation(),n({type:0});break}}),v=I(a=>{switch(a.key){case P.Space:a.preventDefault();break}}),s=I(a=>{var D;oe(a.currentTarget)||c||(o?(n({type:0}),(D=l.buttonElement)==null||D.focus()):n({type:0}))}),{isFocusVisible:m,focusProps:E}=J({autoFocus:d}),{isHovered:C,hoverProps:K}=Y({isDisabled:c}),{pressed:M,pressProps:N}=_({disabled:c}),U=w({open:l.disclosureState===0,hover:C,active:M,disabled:c,focus:m,autofocus:d}),V=q(e,l.buttonElement),j=o?A({ref:f,type:V,disabled:c||void 0,autoFocus:d,onKeyDown:y,onClick:s},E,K,N):A({ref:f,id:i,type:V,"aria-expanded":l.disclosureState===0,"aria-controls":l.panelElement?l.panelId:void 0,disabled:c||void 0,autoFocus:d,onKeyDown:y,onKeyUp:v,onClick:s},E,K,N);return h()({ourProps:j,theirProps:p,slot:U,defaultTag:me,name:"Disclosure.Button"})}let Se="div",be=X.RenderStrategy|X.Static;function ye(e,t){let u=r.useId(),{id:i=`headlessui-disclosure-panel-${u}`,transition:c=!1,...d}=e,[p,l]=F("Disclosure.Panel"),{close:n}=L("Disclosure.Panel"),[b,o]=r.useState(null),$=T(t,I(C=>{se(()=>l({type:5,element:C}))}),o);r.useEffect(()=>(l({type:3,panelId:i}),()=>{l({type:3,panelId:null})}),[i,l]);let f=Z(),[y,v]=ee(c,b,f!==null?(f&g.Open)===g.Open:p.disclosureState===0),s=w({open:p.disclosureState===0,close:n}),m={ref:$,id:i,...te(v)},E=h();return S.createElement(le,null,S.createElement(R.Provider,{value:p.panelId},E({ourProps:m,theirProps:d,slot:s,defaultTag:Se,features:be,visible:y,name:"Disclosure.Panel"})))}let Ie=x(fe),$e=x(Ee),ve=x(ye),we=Object.assign(Ie,{Button:$e,Panel:ve});export{ve as L,we as X,$e as x};
