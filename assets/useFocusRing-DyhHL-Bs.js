import{G as X,r as s}from"./index-_abZp7Jz.js";const Z=typeof document<"u"?X.useLayoutEffect:()=>{},p=e=>{var n;return(n=e?.ownerDocument)!==null&&n!==void 0?n:document},m=e=>e&&"window"in e&&e.window===e?e:p(e).defaultView||window;function ee(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function te(e){return ee(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}let ne=!1;function G(){return ne}function B(e,n){if(!G())return n&&e?e.contains(n):!1;if(!e||!n)return!1;let t=n;for(;t!==null;){if(t===e)return!0;t.tagName==="SLOT"&&t.assignedSlot?t=t.assignedSlot.parentNode:te(t)?t=t.host:t=t.parentNode}return!1}const W=(e=document)=>{var n;if(!G())return e.activeElement;let t=e.activeElement;for(;t&&"shadowRoot"in t&&(!((n=t.shadowRoot)===null||n===void 0)&&n.activeElement);)t=t.shadowRoot.activeElement;return t};function R(e){return G()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function re(e){if(oe())e.focus({preventScroll:!0});else{let n=ie(e);e.focus(),ae(n)}}let H=null;function oe(){if(H==null){H=!1;try{document.createElement("div").focus({get preventScroll(){return H=!0,!0}})}catch{}}return H}function ie(e){let n=e.parentNode,t=[],r=document.scrollingElement||document.documentElement;for(;n instanceof HTMLElement&&n!==r;)(n.offsetHeight<n.scrollHeight||n.offsetWidth<n.scrollWidth)&&t.push({element:n,scrollTop:n.scrollTop,scrollLeft:n.scrollLeft}),n=n.parentNode;return r instanceof HTMLElement&&t.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),t}function ae(e){for(let{element:n,scrollTop:t,scrollLeft:r}of e)n.scrollTop=t,n.scrollLeft=r}function C(e){var n;if(typeof window>"u"||window.navigator==null)return!1;let t=(n=window.navigator.userAgentData)===null||n===void 0?void 0:n.brands;return Array.isArray(t)&&t.some(r=>e.test(r.brand))||e.test(window.navigator.userAgent)}function V(e){var n;return typeof window<"u"&&window.navigator!=null?e.test(((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.platform)||window.navigator.platform):!1}function T(e){let n=null;return()=>(n==null&&(n=e()),n)}const M=T(function(){return V(/^Mac/i)}),ue=T(function(){return V(/^iPad/i)||M()&&navigator.maxTouchPoints>1}),ce=T(function(){return C(/AppleWebKit/i)&&!se()}),se=T(function(){return C(/Chrome/i)}),le=T(function(){return C(/Android/i)}),de=T(function(){return C(/Firefox/i)});function F(e,n,t=!0){var r,o;let{metaKey:a,ctrlKey:u,altKey:i,shiftKey:c}=n;de()&&(!((o=window.event)===null||o===void 0||(r=o.type)===null||r===void 0)&&r.startsWith("key"))&&e.target==="_blank"&&(M()?a=!0:u=!0);let l=ce()&&M()&&!ue()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:a,ctrlKey:u,altKey:i,shiftKey:c}):new MouseEvent("click",{metaKey:a,ctrlKey:u,altKey:i,shiftKey:c,detail:1,bubbles:!0,cancelable:!0});F.isOpening=t,re(e),e.dispatchEvent(l),F.isOpening=!1}F.isOpening=!1;function N(){let e=s.useRef(new Map),n=s.useCallback((o,a,u,i)=>{let c=i?.once?(...l)=>{e.current.delete(u),u(...l)}:u;e.current.set(u,{type:a,eventTarget:o,fn:c,options:i}),o.addEventListener(a,c,i)},[]),t=s.useCallback((o,a,u,i)=>{var c;let l=((c=e.current.get(u))===null||c===void 0?void 0:c.fn)||u;o.removeEventListener(a,l,i),e.current.delete(u)},[]),r=s.useCallback(()=>{e.current.forEach((o,a)=>{t(o.eventTarget,o.type,a,o.options)})},[t]);return s.useEffect(()=>r,[r]),{addGlobalListener:n,removeGlobalListener:t,removeAllGlobalListeners:r}}function fe(e){return e.pointerType===""&&e.isTrusted?!0:le()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function j(e){let n=e;return n.nativeEvent=e,n.isDefaultPrevented=()=>n.defaultPrevented,n.isPropagationStopped=()=>n.cancelBubble,n.persist=()=>{},n}function ve(e,n){Object.defineProperty(e,"target",{value:n}),Object.defineProperty(e,"currentTarget",{value:n})}function U(e){let n=s.useRef({isFocused:!1,observer:null});return Z(()=>{const t=n.current;return()=>{t.observer&&(t.observer.disconnect(),t.observer=null)}},[]),s.useCallback(t=>{if(t.target instanceof HTMLButtonElement||t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target instanceof HTMLSelectElement){n.current.isFocused=!0;let r=t.target,o=a=>{if(n.current.isFocused=!1,r.disabled){let u=j(a);e?.(u)}n.current.observer&&(n.current.observer.disconnect(),n.current.observer=null)};r.addEventListener("focusout",o,{once:!0}),n.current.observer=new MutationObserver(()=>{if(n.current.isFocused&&r.disabled){var a;(a=n.current.observer)===null||a===void 0||a.disconnect();let u=r===document.activeElement?null:document.activeElement;r.dispatchEvent(new FocusEvent("blur",{relatedTarget:u})),r.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:u}))}}),n.current.observer.observe(r,{attributes:!0,attributeFilter:["disabled"]})}},[e])}let be=!1,x=null,D=new Set,L=new Map,w=!1,A=!1;const $e={Tab:!0,Escape:!0};function I(e,n){for(let t of D)t(e,n)}function pe(e){return!(e.metaKey||!M()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function k(e){w=!0,!F.isOpening&&pe(e)&&(x="keyboard",I("keyboard",e))}function h(e){x="pointer","pointerType"in e&&e.pointerType,(e.type==="mousedown"||e.type==="pointerdown")&&(w=!0,I("pointer",e))}function Y(e){!F.isOpening&&fe(e)&&(w=!0,x="virtual")}function q(e){e.target===window||e.target===document||be||!e.isTrusted||(!w&&!A&&(x="virtual",I("virtual",e)),w=!1,A=!1)}function z(){w=!1,A=!0}function O(e){if(typeof window>"u"||typeof document>"u"||L.get(m(e)))return;const n=m(e),t=p(e);let r=n.HTMLElement.prototype.focus;n.HTMLElement.prototype.focus=function(){w=!0,r.apply(this,arguments)},t.addEventListener("keydown",k,!0),t.addEventListener("keyup",k,!0),t.addEventListener("click",Y,!0),n.addEventListener("focus",q,!0),n.addEventListener("blur",z,!1),typeof PointerEvent<"u"&&(t.addEventListener("pointerdown",h,!0),t.addEventListener("pointermove",h,!0),t.addEventListener("pointerup",h,!0)),n.addEventListener("beforeunload",()=>{J(e)},{once:!0}),L.set(n,{focus:r})}const J=(e,n)=>{const t=m(e),r=p(e);n&&r.removeEventListener("DOMContentLoaded",n),L.has(t)&&(t.HTMLElement.prototype.focus=L.get(t).focus,r.removeEventListener("keydown",k,!0),r.removeEventListener("keyup",k,!0),r.removeEventListener("click",Y,!0),t.removeEventListener("focus",q,!0),t.removeEventListener("blur",z,!1),typeof PointerEvent<"u"&&(r.removeEventListener("pointerdown",h,!0),r.removeEventListener("pointermove",h,!0),r.removeEventListener("pointerup",h,!0)),L.delete(t))};function Ee(e){const n=p(e);let t;return n.readyState!=="loading"?O(e):(t=()=>{O(e)},n.addEventListener("DOMContentLoaded",t)),()=>J(e,t)}typeof document<"u"&&Ee();function Q(){return x!=="pointer"}const ge=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function me(e,n,t){let r=p(t?.target);const o=typeof window<"u"?m(t?.target).HTMLInputElement:HTMLInputElement,a=typeof window<"u"?m(t?.target).HTMLTextAreaElement:HTMLTextAreaElement,u=typeof window<"u"?m(t?.target).HTMLElement:HTMLElement,i=typeof window<"u"?m(t?.target).KeyboardEvent:KeyboardEvent;return e=e||r.activeElement instanceof o&&!ge.has(r.activeElement.type)||r.activeElement instanceof a||r.activeElement instanceof u&&r.activeElement.isContentEditable,!(e&&n==="keyboard"&&t instanceof i&&!$e[t.key])}function we(e,n,t){O(),s.useEffect(()=>{let r=(o,a)=>{me(!!t?.isTextInput,o,a)&&e(Q())};return D.add(r),()=>{D.delete(r)}},n)}function ye(e){let{isDisabled:n,onFocus:t,onBlur:r,onFocusChange:o}=e;const a=s.useCallback(c=>{if(c.target===c.currentTarget)return r&&r(c),o&&o(!1),!0},[r,o]),u=U(a),i=s.useCallback(c=>{const l=p(c.target),$=l?W(l):W();c.target===c.currentTarget&&$===R(c.nativeEvent)&&(t&&t(c),o&&o(!0),u(c))},[o,t,u]);return{focusProps:{onFocus:!n&&(t||o||r)?i:void 0,onBlur:!n&&(r||o)?a:void 0}}}function he(e){let{isDisabled:n,onBlurWithin:t,onFocusWithin:r,onFocusWithinChange:o}=e,a=s.useRef({isFocusWithin:!1}),{addGlobalListener:u,removeAllGlobalListeners:i}=N(),c=s.useCallback(d=>{d.currentTarget.contains(d.target)&&a.current.isFocusWithin&&!d.currentTarget.contains(d.relatedTarget)&&(a.current.isFocusWithin=!1,i(),t&&t(d),o&&o(!1))},[t,o,a,i]),l=U(c),$=s.useCallback(d=>{if(!d.currentTarget.contains(d.target))return;const E=p(d.target),v=W(E);if(!a.current.isFocusWithin&&v===R(d.nativeEvent)){r&&r(d),o&&o(!0),a.current.isFocusWithin=!0,l(d);let y=d.currentTarget;u(E,"focus",f=>{if(a.current.isFocusWithin&&!B(y,f.target)){let b=new E.defaultView.FocusEvent("blur",{relatedTarget:f.target});ve(b,y);let g=j(b);c(g)}},{capture:!0})}},[r,o,l,u,c]);return n?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:$,onBlur:c}}}let _=!1,P=0;function Te(){_=!0,setTimeout(()=>{_=!1},50)}function K(e){e.pointerType==="touch"&&Te()}function Le(){if(!(typeof document>"u"))return P===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",K),P++,()=>{P--,!(P>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",K)}}function xe(e){let{onHoverStart:n,onHoverChange:t,onHoverEnd:r,isDisabled:o}=e,[a,u]=s.useState(!1),i=s.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;s.useEffect(Le,[]);let{addGlobalListener:c,removeAllGlobalListeners:l}=N(),{hoverProps:$,triggerHoverEnd:d}=s.useMemo(()=>{let E=(f,b)=>{if(i.pointerType=b,o||b==="touch"||i.isHovered||!f.currentTarget.contains(f.target))return;i.isHovered=!0;let g=f.currentTarget;i.target=g,c(p(f.target),"pointerover",S=>{i.isHovered&&i.target&&!B(i.target,S.target)&&v(S,S.pointerType)},{capture:!0}),n&&n({type:"hoverstart",target:g,pointerType:b}),t&&t(!0),u(!0)},v=(f,b)=>{let g=i.target;i.pointerType="",i.target=null,!(b==="touch"||!i.isHovered||!g)&&(i.isHovered=!1,l(),r&&r({type:"hoverend",target:g,pointerType:b}),t&&t(!1),u(!1))},y={};return typeof PointerEvent<"u"&&(y.onPointerEnter=f=>{_&&f.pointerType==="mouse"||E(f,f.pointerType)},y.onPointerLeave=f=>{!o&&f.currentTarget.contains(f.target)&&v(f,f.pointerType)}),{hoverProps:y,triggerHoverEnd:v}},[n,t,r,o,i,c,l]);return s.useEffect(()=>{o&&d({currentTarget:i.target},i.pointerType)},[o]),{hoverProps:$,isHovered:a}}function He(e={}){let{autoFocus:n=!1,isTextInput:t,within:r}=e,o=s.useRef({isFocused:!1,isFocusVisible:n||Q()}),[a,u]=s.useState(!1),[i,c]=s.useState(()=>o.current.isFocused&&o.current.isFocusVisible),l=s.useCallback(()=>c(o.current.isFocused&&o.current.isFocusVisible),[]),$=s.useCallback(v=>{o.current.isFocused=v,u(v),l()},[l]);we(v=>{o.current.isFocusVisible=v,l()},[],{isTextInput:t});let{focusProps:d}=ye({isDisabled:r,onFocusChange:$}),{focusWithinProps:E}=he({isDisabled:!r,onFocusWithinChange:$});return{isFocused:a,isFocusVisible:i,focusProps:r?E:d}}export{He as $,xe as a};
