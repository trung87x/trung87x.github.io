import{$ as J,a as Y}from"./useFocusRing-DcMgcFf7.js";import{G as S,r as l}from"./index-BUE_4nSx.js";import{w as _}from"./use-active-press-CdjcnPjf.js";import{Y as x,o as I,V as A,K as T,d as q,u as h,A as X}from"./render-CNyBWpu3.js";import{e as z}from"./use-resolve-button-type-BuRlBvvn.js";import{n as k}from"./use-slot-BZcd_w4P.js";import{y as w,T as Q}from"./use-sync-refs-Dh0umLOC.js";import{u as W,N as Z,i as g,x as ee,s as te,c as re}from"./open-closed-BGpwrHHP.js";import{C as le}from"./close-provider-CYB1hxin.js";import{s as oe}from"./bugs-BLuxiOOY.js";import{i as G}from"./dom-BlW_0b_t.js";import{l as ne}from"./owner-C7ikqkQc.js";import{o as P}from"./keyboard-C1Wiwm26.js";var H;let se=(H=S.startTransition)!=null?H:function(e){e()};var ae=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ae||{}),ue=(e=>(e[e.ToggleDisclosure=0]="ToggleDisclosure",e[e.CloseDisclosure=1]="CloseDisclosure",e[e.SetButtonId=2]="SetButtonId",e[e.SetPanelId=3]="SetPanelId",e[e.SetButtonElement=4]="SetButtonElement",e[e.SetPanelElement=5]="SetPanelElement",e))(ue||{});let ie={0:e=>({...e,disclosureState:h(e.disclosureState,{0:1,1:0})}),1:e=>e.disclosureState===1?e:{...e,disclosureState:1},2(e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},3(e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}},4(e,t){return e.buttonElement===t.element?e:{...e,buttonElement:t.element}},5(e,t){return e.panelElement===t.element?e:{...e,panelElement:t.element}}},B=l.createContext(null);B.displayName="DisclosureContext";function F(e){let t=l.useContext(B);if(t===null){let u=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(u,F),u}return t}let O=l.createContext(null);O.displayName="DisclosureAPIContext";function L(e){let t=l.useContext(O);if(t===null){let u=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(u,L),u}return t}let R=l.createContext(null);R.displayName="DisclosurePanelContext";function ce(){return l.useContext(R)}function pe(e,t){return h(t.type,ie,e,t)}let de=l.Fragment;function me(e,t){let{defaultOpen:u=!1,...c}=e,i=l.useRef(null),p=w(t,Q(s=>{i.current=s},e.as===void 0||q(e.as))),d=l.useReducer(pe,{disclosureState:u?0:1,buttonElement:null,panelElement:null,buttonId:null,panelId:null}),[{disclosureState:r,buttonId:o},b]=d,n=I(s=>{b({type:1});let f=ne(i.current);if(!f||!o)return;let E=s?G(s)?s:"current"in s&&G(s.current)?s.current:f.getElementById(o):f.getElementById(o);E?.focus()}),$=l.useMemo(()=>({close:n}),[n]),m=k({open:r===0,close:n}),y={ref:p},v=T();return S.createElement(B.Provider,{value:d},S.createElement(O.Provider,{value:$},S.createElement(le,{value:n},S.createElement(re,{value:h(r,{0:g.Open,1:g.Closed})},v({ourProps:y,theirProps:c,slot:m,defaultTag:de,name:"Disclosure"})))))}let fe="button";function Ee(e,t){let u=l.useId(),{id:c=`headlessui-disclosure-button-${u}`,disabled:i=!1,autoFocus:p=!1,...d}=e,[r,o]=F("Disclosure.Button"),b=ce(),n=b===null?!1:b===r.panelId,$=l.useRef(null),m=w($,t,I(a=>{if(!n)return o({type:4,element:a})}));l.useEffect(()=>{if(!n)return o({type:2,buttonId:c}),()=>{o({type:2,buttonId:null})}},[c,o,n]);let y=I(a=>{var D;if(n){if(r.disclosureState===1)return;switch(a.key){case P.Space:case P.Enter:a.preventDefault(),a.stopPropagation(),o({type:0}),(D=r.buttonElement)==null||D.focus();break}}else switch(a.key){case P.Space:case P.Enter:a.preventDefault(),a.stopPropagation(),o({type:0});break}}),v=I(a=>{a.key===P.Space&&a.preventDefault()}),s=I(a=>{var D;oe(a.currentTarget)||i||(n?(o({type:0}),(D=r.buttonElement)==null||D.focus()):o({type:0}))}),{isFocusVisible:f,focusProps:E}=J({autoFocus:p}),{isHovered:C,hoverProps:K}=Y({isDisabled:i}),{pressed:M,pressProps:N}=_({disabled:i}),U=k({open:r.disclosureState===0,hover:C,active:M,disabled:i,focus:f,autofocus:p}),V=z(e,r.buttonElement),j=n?A({ref:m,type:V,disabled:i||void 0,autoFocus:p,onKeyDown:y,onClick:s},E,K,N):A({ref:m,id:c,type:V,"aria-expanded":r.disclosureState===0,"aria-controls":r.panelElement?r.panelId:void 0,disabled:i||void 0,autoFocus:p,onKeyDown:y,onKeyUp:v,onClick:s},E,K,N);return T()({ourProps:j,theirProps:d,slot:U,defaultTag:fe,name:"Disclosure.Button"})}let Se="div",be=X.RenderStrategy|X.Static;function ye(e,t){let u=l.useId(),{id:c=`headlessui-disclosure-panel-${u}`,transition:i=!1,...p}=e,[d,r]=F("Disclosure.Panel"),{close:o}=L("Disclosure.Panel"),[b,n]=l.useState(null),$=w(t,I(C=>{se(()=>r({type:5,element:C}))}),n);l.useEffect(()=>(r({type:3,panelId:c}),()=>{r({type:3,panelId:null})}),[c,r]);let m=W(),[y,v]=Z(i,b,m!==null?(m&g.Open)===g.Open:d.disclosureState===0),s=k({open:d.disclosureState===0,close:o}),f={ref:$,id:c,...ee(v)},E=T();return S.createElement(te,null,S.createElement(R.Provider,{value:d.panelId},E({ourProps:f,theirProps:p,slot:s,defaultTag:Se,features:be,visible:y,name:"Disclosure.Panel"})))}let Ie=x(me),$e=x(Ee),ve=x(ye),Ke=Object.assign(Ie,{Button:$e,Panel:ve});export{ve as L,Ke as X,$e as x};
