import{$ as Z,a as fe}from"./useFocusRing-f27ekapY.js";import{r as o,G as F}from"./index-Cfbom0r9.js";import{w as pe,e as be}from"./use-resolve-button-type-nCEFKAW6.js";import{Y as B,y as W,K as N,n as _,V as ee,o as E,A as Q,t as xe,u as U,c as q}from"./use-sync-refs-CwDvttRH.js";import{a as V,o as P,f as me}from"./keyboard-Bur1hHA-.js";import{f as ge}from"./use-is-mounted-DexhGkkX.js";import{f as te,s as ve}from"./hidden-DGdeukVa.js";import{v as C,T,A as K,G}from"./focus-management-D1Fc7qVe.js";function Pe({onFocus:e}){let[t,n]=o.useState(!0),r=ge();return t?F.createElement(te,{as:"button",type:"button",features:ve.Focusable,onFocus:l=>{l.preventDefault();let a,s=50;function i(){if(s--<=0){a&&cancelAnimationFrame(a);return}if(e()){if(cancelAnimationFrame(a),!r.current)return;n(!1);return}a=requestAnimationFrame(i)}a=requestAnimationFrame(i)}}):null}const re=o.createContext(null);function Te(){return{groups:new Map,get(e,t){var n;let r=this.groups.get(e);r||(r=new Map,this.groups.set(e,r));let l=(n=r.get(t))!=null?n:0;r.set(t,l+1);let a=Array.from(r.keys()).indexOf(t);function s(){let i=r.get(t);i>1?r.set(t,i-1):r.delete(t)}return[a,s]}}}function $e({children:e}){let t=o.useRef(Te());return o.createElement(re.Provider,{value:t},e)}function ne(e){let t=o.useContext(re);if(!t)throw new Error("You must wrap your component in a <StableCollection>");let n=o.useId(),[r,l]=t.current.get(e,n);return o.useEffect(()=>l,[]),r}var he=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(he||{}),Ie=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(Ie||{}),ye=(e=>(e[e.SetSelectedIndex=0]="SetSelectedIndex",e[e.RegisterTab=1]="RegisterTab",e[e.UnregisterTab=2]="UnregisterTab",e[e.RegisterPanel=3]="RegisterPanel",e[e.UnregisterPanel=4]="UnregisterPanel",e))(ye||{});let we={0(e,t){var n;let r=G(e.tabs,c=>c.current),l=G(e.panels,c=>c.current),a=r.filter(c=>{var m;return!((m=c.current)!=null&&m.hasAttribute("disabled"))}),s={...e,tabs:r,panels:l};if(t.index<0||t.index>r.length-1){let c=U(Math.sign(t.index-e.selectedIndex),{[-1]:()=>1,0:()=>U(Math.sign(t.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});if(a.length===0)return s;let m=U(c,{0:()=>r.indexOf(a[0]),1:()=>r.indexOf(a[a.length-1])});return{...s,selectedIndex:m===-1?e.selectedIndex:m}}let i=r.slice(0,t.index),$=[...r.slice(t.index),...i].find(c=>a.includes(c));if(!$)return s;let x=(n=r.indexOf($))!=null?n:e.selectedIndex;return x===-1&&(x=e.selectedIndex),{...s,selectedIndex:x}},1(e,t){if(e.tabs.includes(t.tab))return e;let n=e.tabs[e.selectedIndex],r=G([...e.tabs,t.tab],a=>a.current),l=e.selectedIndex;return e.info.current.isControlled||(l=r.indexOf(n),l===-1&&(l=e.selectedIndex)),{...e,tabs:r,selectedIndex:l}},2(e,t){return{...e,tabs:e.tabs.filter(n=>n!==t.tab)}},3(e,t){return e.panels.includes(t.panel)?e:{...e,panels:G([...e.panels,t.panel],n=>n.current)}},4(e,t){return{...e,panels:e.panels.filter(n=>n!==t.panel)}}},H=o.createContext(null);H.displayName="TabsDataContext";function k(e){let t=o.useContext(H);if(t===null){let n=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,k),n}return t}let Y=o.createContext(null);Y.displayName="TabsActionsContext";function J(e){let t=o.useContext(Y);if(t===null){let n=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,J),n}return t}function Ee(e,t){return U(t.type,we,e,t)}let Ae="div";function Se(e,t){let{defaultIndex:n=0,vertical:r=!1,manual:l=!1,onChange:a,selectedIndex:s=null,...i}=e;const $=r?"vertical":"horizontal",x=l?"manual":"auto";let c=s!==null,m=q({isControlled:c}),A=W(t),[p,d]=o.useReducer(Ee,{info:m,selectedIndex:s??n,tabs:[],panels:[]}),D=V({selectedIndex:p.selectedIndex}),R=q(a||(()=>{})),I=q(p.tabs),b=o.useMemo(()=>({orientation:$,activation:x,...p}),[$,x,p]),L=E(f=>(d({type:1,tab:f}),()=>d({type:2,tab:f}))),M=E(f=>(d({type:3,panel:f}),()=>d({type:4,panel:f}))),g=E(f=>{v.current!==f&&R.current(f),c||d({type:0,index:f})}),v=q(c?e.selectedIndex:p.selectedIndex),w=o.useMemo(()=>({registerTab:L,registerPanel:M,change:g}),[]);_(()=>{d({type:0,index:s??n})},[s]),_(()=>{if(v.current===void 0||p.tabs.length<=0)return;let f=G(p.tabs,y=>y.current);f.some((y,S)=>p.tabs[S]!==y)&&g(f.indexOf(p.tabs[v.current]))});let j={ref:A},O=N();return F.createElement($e,null,F.createElement(Y.Provider,{value:w},F.createElement(H.Provider,{value:b},b.tabs.length<=0&&F.createElement(Pe,{onFocus:()=>{var f,y;for(let S of I.current)if(((f=S.current)==null?void 0:f.tabIndex)===0)return(y=S.current)==null||y.focus(),!0;return!1}}),O({ourProps:j,theirProps:i,slot:D,defaultTag:Ae,name:"Tabs"}))))}let Ce="div";function Fe(e,t){let{orientation:n,selectedIndex:r}=k("Tab.List"),l=W(t),a=V({selectedIndex:r}),s=e,i={ref:l,role:"tablist","aria-orientation":n};return N()({ourProps:i,theirProps:s,slot:a,defaultTag:Ce,name:"Tabs.List"})}let ke="button";function De(e,t){var n,r;let l=o.useId(),{id:a=`headlessui-tabs-tab-${l}`,disabled:s=!1,autoFocus:i=!1,...$}=e,{orientation:x,activation:c,selectedIndex:m,tabs:A,panels:p}=k("Tab"),d=J("Tab"),D=k("Tab"),[R,I]=o.useState(null),b=o.useRef(null),L=W(b,t,I);_(()=>d.registerTab(b),[d,b]);let M=ne("tabs"),g=A.indexOf(b);g===-1&&(g=M);let v=g===m,w=E(u=>{let h=u();if(h===K.Success&&c==="auto"){let z=me(b.current),X=D.tabs.findIndex(de=>de.current===z);X!==-1&&d.change(X)}return h}),j=E(u=>{let h=A.map(z=>z.current).filter(Boolean);if(u.key===P.Space||u.key===P.Enter){u.preventDefault(),u.stopPropagation(),d.change(g);return}switch(u.key){case P.Home:case P.PageUp:return u.preventDefault(),u.stopPropagation(),w(()=>C(h,T.First));case P.End:case P.PageDown:return u.preventDefault(),u.stopPropagation(),w(()=>C(h,T.Last))}if(w(()=>U(x,{vertical(){return u.key===P.ArrowUp?C(h,T.Previous|T.WrapAround):u.key===P.ArrowDown?C(h,T.Next|T.WrapAround):K.Error},horizontal(){return u.key===P.ArrowLeft?C(h,T.Previous|T.WrapAround):u.key===P.ArrowRight?C(h,T.Next|T.WrapAround):K.Error}}))===K.Success)return u.preventDefault()}),O=o.useRef(!1),f=E(()=>{var u;O.current||(O.current=!0,(u=b.current)==null||u.focus({preventScroll:!0}),d.change(g),xe(()=>{O.current=!1}))}),y=E(u=>{u.preventDefault()}),{isFocusVisible:S,focusProps:ae}=Z({autoFocus:i}),{isHovered:se,hoverProps:le}=fe({isDisabled:s}),{pressed:ue,pressProps:oe}=pe({disabled:s}),ie=V({selected:v,hover:se,active:ue,focus:S,autofocus:i,disabled:s}),ce=ee({ref:L,onKeyDown:j,onMouseDown:y,onClick:f,id:a,role:"tab",type:be(e,R),"aria-controls":(r=(n=p[g])==null?void 0:n.current)==null?void 0:r.id,"aria-selected":v,tabIndex:v?0:-1,disabled:s||void 0,autoFocus:i},ae,le,oe);return N()({ourProps:ce,theirProps:$,slot:ie,defaultTag:ke,name:"Tabs.Tab"})}let Re="div";function Le(e,t){let{selectedIndex:n}=k("Tab.Panels"),r=W(t),l=V({selectedIndex:n}),a=e,s={ref:r};return N()({ourProps:s,theirProps:a,slot:l,defaultTag:Re,name:"Tabs.Panels"})}let Me="div",Oe=Q.RenderStrategy|Q.Static;function Ge(e,t){var n,r,l,a;let s=o.useId(),{id:i=`headlessui-tabs-panel-${s}`,tabIndex:$=0,...x}=e,{selectedIndex:c,tabs:m,panels:A}=k("Tab.Panel"),p=J("Tab.Panel"),d=o.useRef(null),D=W(d,t);_(()=>p.registerPanel(d),[p,d]);let R=ne("panels"),I=A.indexOf(d);I===-1&&(I=R);let b=I===c,{isFocusVisible:L,focusProps:M}=Z(),g=V({selected:b,focus:L}),v=ee({ref:D,id:i,role:"tabpanel","aria-labelledby":(r=(n=m[I])==null?void 0:n.current)==null?void 0:r.id,tabIndex:b?$:-1},M),w=N();return!b&&((l=x.unmount)==null||l)&&!((a=x.static)!=null&&a)?F.createElement(te,{"aria-hidden":"true",...v}):w({ourProps:v,theirProps:x,slot:g,defaultTag:Me,features:Oe,visible:b,name:"Tabs.Panel"})}let Ue=B(De),Be=B(Se),We=B(Fe),Ne=B(Le),Ve=B(Ge),Xe=Object.assign(Ue,{Group:Be,List:We,Panels:Ne,Panel:Ve});export{Be as B,Ve as K,We as W,Xe as d,Ne as j};
